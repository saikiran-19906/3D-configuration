<!DOCTYPE html>
<html>
  <head>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.1/model-viewer.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://modelviewer.dev/shared/modelviewer.js"></script>
    
  </head>
   <body>
    <model-viewer id="model" 
                      bounds="tight" 
                      enable-pan
                      src="Assets/buster_drone_2.glb" 
                      ar 
                      ar-modes="webxr scene-viewer quick-look" 
                      shadow-intensity="0"
                      camera-controls camera-orbit="0deg 90deg 2m"
                  camera-target="0m 0m 0m"
                  field-of-view="80deg"
                  min-field-of-view="60deg"
                  max-field-of-view="80deg"
                  interpolation-decay="100"
                  
                      exposure="1"
                      style="width:auto; height:1000px;">
            <div class="progress-bar hide" slot="progress-bar">
                <div class="update-bar"></div>
            </div>
            <button class="playbutton" id="animation" onclick="toggleAnimation(); toggleCameraPosition();"
                    slot="hotspot-one"
            data-position="0.16 0.1 0.17"
            data-normal="-0.07 0.97 0.23">Open</button>
      
      
<script>
function toggleAnimation() {
        let animation,state;
        animation = document.getElementById("animation");
        state = animation.innerText;
        if(state == 'Open') 
        {
            animation.innerText = "Close";
            model.timeScale = 1;
            model.updateHotspot({ 
                name: 'hotspot-1', //Name of hotspot when open
                position: "-0.25217607736855535m 110.35097035692672m 68.70624102514762m"
            });
        }
         else {
            animation.innerText = "Open";
            model.timeScale = -1;
            model.updateHotspot({ 
                name: 'hotspot-1', //Name of hotspot when closed
                position: "0.07838113854751327m 109.68274346113967m 7.710404087301681m"
            });
        }
        model.play({repetitions: 1});
        console.log(model.currentTime);
        console.log(animation);
    };
  function toggleCameraPosition() {
  var viewer = document.querySelector('model-viewer');
  if (viewer.cameraOrbit == '0deg 90deg 2m') {
    viewer.cameraOrbit = '0deg 0deg 1m';
    viewer.cameraTarget = '0m 0m -1m';
  } else {
    viewer.cameraOrbit = '0deg 90deg 2m';
    viewer.cameraTarget = '0m 0m 0m';
  }
}
  
  </script>
  </body>
</html>
